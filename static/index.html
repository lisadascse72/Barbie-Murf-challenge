<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Magical Voice Agent</title>
    <link rel="stylesheet" href="/static/style.css" />
</head>
<body>
    <div class="container">
        <header class="main-header">
            <h1>
                <img src="/assets/barbie.svg" alt="Barbie Icon" class="barbie-icon" />
                Barbie's Magical Chat
            </h1>
        </header>

        <hr class="header-divider" />
        <h1 class="chat-heading">Let's chat!</h1>

        <div id="chatbox" class="chatbox">
            </div>

        <div class="chat-input-controls">
            <input type="text" id="chat-text-input" placeholder="What's on your mind, fashionista?" />
            <button class="chat-btn" id="sendTextBtn">
                <img src="/assets/send.svg" alt="Send" class="chat-icon">
            </button>
            <button class="chat-btn record-btn" id="startRecordingChatBtn">
                <img src="/assets/mic.svg" alt="Start Recording" class="chat-icon">
            </button>
            <button class="chat-btn record-btn" id="stopRecordingChatBtn" style="display: none;">
                <img src="/assets/stop.svg" alt="Stop Recording" class="chat-icon">
            </button>
        </div>
        
        <audio id="llmResponseAudioPlayer" controls style="width: 100%; display: none; margin-top: 1rem;"></audio>
    </div>

    <div class="magical-glow"></div>
    <div class="magical-stars"></div>
    <script src="/static/script.js"></script>
    <script>
function speakText(text) {
    const utterance = new SpeechSynthesisUtterance(text);
    utterance.pitch = 1.5;   // Higher pitch for Barbie-like voice
    utterance.rate = 1.1;    // Slightly faster
    utterance.volume = 1;    // Full volume

    // Pick a voice (Barbie-style female voice if available)
    const voices = speechSynthesis.getVoices();
    const barbieVoice = voices.find(v => v.name.includes("Female") || v.name.includes("Google US English"));
    if (barbieVoice) {
        utterance.voice = barbieVoice;
    }

    speechSynthesis.speak(utterance);
}

// Call this whenever the bot sends a response
function handleBotResponse(message) {
    const chatBox = document.getElementById("chat-box");
    const p = document.createElement("p");
    p.className = "bot-message";
    p.innerText = message;
    chatBox.appendChild(p);

    // Make Barbie speak
    speakText(message);
}
</script>

</body>
</html>